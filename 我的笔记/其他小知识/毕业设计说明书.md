# 毕业设计说明书

## 摘 要

随着信息化建设的推进，信息技术已广泛应用于各行各业之中，这使我们的生活发生了革命性的变化，这种变化也对宠物医院的管理方式产生了极大的影响，传统的手工管理模式正在被更加方便快捷的信息化管理所取代。因此，一个完善的宠物医院管理系统是必不可少的。

宠物医院管理系统通过互联网实现了信息的快速同步，极大地提高了宠物医院的工作效率，实现信息管理的标准化、规范化。并且能让用户简便地完成领养宠物、咨询医生等服务，更加及时、直观的了解宠物的健康状况。

论文首先简要介绍了国内外宠物医院的信息化管理现状，而后对系统开发过程中所涉及的相关技术进行介绍。并通过对宠物医院的业务流程进行分析与规划，完成了系统的需求分析。论文着重描述了系统的设计与实现过程，详细介绍了信息展示、后台管理、在线聊天、权限校验等功能模块的设计思路及具体功能。

在文章的后半部分，提供了系统的部署教程，并简要描述了系统在开发过程中所进行的测试。

本系统基于Java语言开发，采取了时下流行的SSM框架与前后端分离架构。实现了医生与用户进行在线聊天、用户查看宠物及个人相关信息、管理员对后台数据进行信息管理等功能。主要包含了权限校验、在线聊天、文件管理、用户展示、后台管理等模块。在系统设计上尽可能的贴合宠物医院的工作流程，更加能够提升宠物医院的工作效率。

 

【关键词】 宠物医院；JavaWeb；SSM；前后端分离；在线聊天；权限校验

## 目录

[TOC]



## 一、绪论

随着经济的发展，人均可支配收入得到了提高。在人口老龄化和居民可支配收入增加的带动下，宠物相关行业的市场规模也在扩大[1]，宠物健康问题也逐渐引起了人们的关注，并由此激发了对宠物医院的需求。因此近些年来，宠物医院的发展十分迅速，并且随着宠物医院的发展，宠物医院的信息量也在不断增长，传统的信息处理方式已经不再适应宠物医院发展的需要[2]。

随着经济的发展，人均可支配收入得到了提高。在人口老龄化和居民可支配收入增加的带动下，宠物相关行业的市场规模也在扩大[1]，宠物健康问题也逐渐引起了人们的关注，并由此激发了对宠物医院的需求。因此近些年来，宠物医院的发展十分迅速，并且随着宠物医院的发展，宠物医院的信息量也在不断增长，传统的信息处理方式已经不再适应宠物医院发展的需要[2]。

同时随着信息化时代的到来，人们对宠物医院也有了更多的需求。比如人们希望在宠物住院或寄养时，能够远程查看宠物的状况，或者在宠物表现异常时能及时向医生咨询求助。根据这些需求，宠物医院需要一套更加方便快捷、更加注重沟通的信息化管理系统。

### 1.2 国内外研究现状

在当今社会，世界各国对于信息的需求也越来越高，信息技术和信息产品广泛的应用于各个国家、地区、企业、家庭、个人。早在20世纪80年代，发达国家就已经开始信息化建设工作。目前，欧美国家早已完成针对于宠物的信息化管理[3]，建立了宠物电子档案，在宠物管理上实现了规范化、标准化。

相比较于欧美的发达国家，我国的信息化程度比较落后，且发展很不均衡，仍有部分工作在使用手工操作，这极大影响了宠物医院的信息化管理。因此在2011年，根据“国民经济和社会发展第十二个五年规划”[4]，我国提出了医疗卫生信息化的“3521工程”（即：建设国家级、省级和地市级3级卫生信息平台），开始了医疗卫生信息化的建设。

随着我国信息技术在宠物医院行业应用程度的不断提高，目前大部分的宠物医院已经实现了宠物医院管理的信息化，但并没有完全普及，仍有一些小型宠物医院在使用传统的手工管理方式[5]。

### 1.3 研究的目的与意义

一套完善的宠物医院管理系统对医疗卫生信息化的建设具有重要的意义，既能提高医院管理人员的工作效率，又能方便医院的统一管理，减少人力物力的浪费。同时也能让用户简便地完成领养宠物、咨询医生等服务，更加及时、直观的了解宠物的健康状况。

### 1.4 论文结构

本文大致分以下六个章节来对系统的设计与实现过程进行说明，包括：

1. 绪论。本文章的开头部分，阐述本系统的研究背景及意义，以及国内外的研究现状。

2. 相关技术介绍。简单介绍了系统在实现过程所涉及的相关技术，以及为什么选用这些技术。

3. 系统需求分析。分析本系统所需要实现的具体需求，以及开发过程中可能遇到的问题。

4. 系统设计。本文章的重要部分，包括数据库设计、界面设计、具体功能模块的设计思路及具体功能。

5. 系统测试。简要描述了系统在开发过程中所进行的测试，并提供了系统的部署教程。

6. 总结与展望。对开发本系统的过程以及最终成果做出总结，以及未来的完善方向。

## 二、相关技术简介

### 2.1 Java简介

本系统的后端基于Java开发，相关的后端开发语言还有Python、C++，选用Java的理由如下：

1. 丰富的生态。Java作为一门成熟的、使用者最多的开发语言[6]，在系统开发过程中遇到的问题都能找到相应的解决方案。同时，Java提供了许多成熟的第三方框架[7]，通过使用这些框架，可以极大的提高开发效率，简化开发难度。

2. 良好的性能支持。Java相比于Python，具有更优秀的性能。而Java自带的垃圾回收机制，也可以让开发者将精力集中在业务逻辑的实现上。

3. 较低的上手难度。Java的上手难度在各编程语言中相对较低，这导致了Java培训机构的泛滥，同时也让Java相关的学习资源可以轻易得到。选用Java作为系统的开发语言，可以简化学习成本。

### 2.2 SpringBoot简介

SpringBoot是目前最流行的JavaWeb开发框架，可以简化JavaWeb的开发。与传统的Servlet+JSP相比，它不用编写大量的xml配置文件[8]，也不用写太多的代码来对各种框架进行整合。

SpringBoot还提供了控制反转、依赖注入等功能，以此来降低代码的耦合，使系统更加易于维护和升级。

同时，SpringBoot还集成了许多第三方框架，比如集成了Slf4j日志框架进行系统日志管理，使系统如果出了问题更加容易排查。SpringBoot还有许多扩展应用，比如用于发送邮件的Spring Email、用于实现用户医生在线聊天的Spring WebSocket。

### 2.3 MyBatis-Plus简介

MyBatis-Plus简称MP，是操作数据库的持久层Java框架[9]，它在MyBatis的基础上封装了常用的单表操作，并提供了条件构造器。以至于在大部分单表操作中，可以做到不写SQL语句就操作数据库。相关的持久层框架还有Spring Data JDBC、Hibernate、MyBatis。

选用MyBatis-Plus的理由有如下三点：

1. MyBatis-Plus相对于Spring Data JDBC、Hibernate，配置相对简单，上手门槛相对较低。

2. MyBatis-Plus相对于MyBatis和Spring Data，操作更加灵活，对于一些基础的单表操作，可以直接调用MyBatis-Plus封装的API，对于一些复杂的多表操作，可以像MyBatis一样通过配置文件编写SQL操作数据库。根据不同的情况使用不同的方式，使得系统开发更加灵活。

3. MyBatis-Plus提供了丰富的功能插件，比如在更新、新增数据时自动注入修改、创建时间，或者是使用代码生成器从数据库逆向生成代码。通过这些插件可以大大缩短开发时间。

### 2.4 Bootstrap简介

Bootstrap是一个基于原生JavaScript[10]的前端UI组件库。相关的前端框架还有Element-UI，选用Bootstrap有以下三个理由。

1. 提供了丰富的CSS样式。Bootstrap内置了丰富的CSS样式，只需要通过class属性进行引用即可，同时这也可以保证页面风格的统一。

2. 响应式布局。Bootstrap提供了栅格系统来实现响应式布局[11]，通过调整屏幕的尺寸，对应的页面布局会随之变化，这使页面在缩小的时候，组件仍然可以完整的显示内容，不必担心随着屏幕尺寸的改变，而出现布局过于紧凑，或者信息显示不全的情况。

3. 更小的空间占用。本系统使用的Bootstrap是v5.1.3版本，这个版本不需要依赖jQuery，因此引用Bootstrap，只需要占用大概238KB的存储空间。而如果使用Element-UI，这需要至少7MB的存储空间，同时Element-UI所依赖的Vue框架也需要大概300KB的内存。

### 2.5 MySQL数据库简介

MySQL是一种关系型数据库管理系统[12]，将数据保存在不同的表中，通过表与表之间的关系对数据进行操作，提高了操作的速度以及灵活性。

与其它数据库相比，例如Oracle、SQL Server等，MySQL提供了良好的开源支持，拥有成本更低。同时由于其体积小，速度快的特点，成为了时下最流行的开源数据库。而这也是本系统的数据库选用MySQL的理由。

### 2.6 微信小程序简介

微信小程序是由微信团队开发，依赖微信生态的一种轻应用。与原生APP相比，小程序不需要安装，也不需要像APP那样占用手机内存。同时微信小程序具有跨平台的特点，无论是安卓还是IOS系统，都可以运行微信小程序。

本系统的移动端使用微信小程序实现，有如下三个理由：

1. 提供中文文档支持：微信小程序由微信团队开发，提供了丰富的中文文档教程[13]，只需要照着文档即可快速上手。

2. 开发调试相对方便：微信团队为小程序开发提供了专门的工具，在系统的开发过程中，可以很方便的对页面效果进行预览。同时，也可以通过手机随时查看小程序的页面效果。

3. 跨平台应用开发：微信小程序的跨平台特点让它可以适配不同的操作系统，同时微信团队也为小程序做了对不同屏幕宽度的适配[14]。这让用户可以随时通过微信使用宠物医院管理系统，并且不必担心系统的兼容性。

## 三、系统需求分析

### 3.1 宠物医院的初步调查

宠物医院的初步调查主要通过走访观察现有的宠物医院、上网查阅资料的形式展开。

经过五天的初步了解，走访了位于成都市武侯区、郫都区内的居住区、商业街旁的十家宠物医院。最后得出结论如下：目前宠物医院的规模都不大，大部分的宠物医院坐落于小区旁，以小店的形式进行营业，往往只有一两个医生，提供三至五个专科；少部分的宠物医院位于一些较繁荣的社区，以营业厅的形式进行营业，一般有一两层，其中值班的医护人员目测不少于七个。目前大部分宠物医院都实现了信息化管理，但仍有部分小店在使用传统的手工记录。

### 3.2 功能需求分析

通过对宠物医院的初步调查、以及从自身作为使用者的角度出发，大致得出本系统的以下几个需求：

1. 本系统使用者应分为三种角色，分别对应用户、医生、管理员，这三种角色在系统中行使不同的功能，它们应该具有不同的需求。

2. 用户：用户的需求主要是查看医院的部分信息和自己的相关信息。同时，应该给用户额外开发一个微信小程序的前台界面，以便用户能够随时随地的访问前台网站，以及向医生发起咨询或求助。

3. 医生：主要有三个需求，分别是处理挂号单、回答由用户所发起的咨询或求助、以及查看和修改医生的个人信息。需求较为简单。其它的一些事务，比如挂号、录入宠物信息等，由管理员这一角色负责。

4. 管理员：要求能够对后台的数据进行增删改查，例如发布公告、修改宠物信息。同时为了保证数据的安全，防止数据被误修改。应该对管理员进行角色权限的区分，不同的角色应该具有不同的权限。

#### 3.2.1 客户端功能

1. 用户要能够通过电脑的网页端或手机的小程序端访问到医院的网站，同时，用户在不登录的状态下为游客模式，只能看到部分的公开信息。

2. 用户要能够看到最新发布的三条公告，以及所有待领养的宠物信息，和现在正在医院寄养的宠物信息。

3. 用户要能够看到当前医院的医生信息，包括他们的工号、照片、年龄、简介，以及医生当前的挂号占用情况。

4. 用户要能够直接向医生发起实时聊天，进行咨询、求助。同时医生不在线时，要能够将信息保存在聊天记录。

5. 用户要能够查看自己的个人信息并对其进行修改，同时用户要能够查看自己的宠物信息，以及自己名下的挂号单详情。

6. 用户可以重置密码，或者在未登录的情况下进行注册，为了确保隐私以及数据安全，这些操作都要通过邮箱发送验证码的方式进行校验。

#### 3.2.2 医生端功能

医生的设计大致与用户相同。

1. 要能够对自己当前挂号单进行处理，以向医院的前台发送反馈。

2. 要能够回答用户发起的在线咨询，这里的前端设计以及后台逻辑与用户端相同。

3. 能够修改自己部分的个人资料，以及通过邮箱发验证码的形式重置密码。

#### 3.2.3 管理员端功能

1. 管理员要能够对用户、宠物、挂号、医生、领养、寄养、公告、科室、管理人员等信息进行增删改查。

2. 为了方便控制权限，应该分为三种身份，分别为超级管理员、普通管理员、普通员工。其中超级管理员对应现实医院里的院长，应该具有后台管理系统的全部权限。而普通管理员则对应现实医院中的主任，应具有除了人员任命、科室变动以外的全部权限。最后是普通员工，对应现实里的护士。只具有部分表的新增权限（诸如挂号、宠物信息录入），而无修改与删除权限。

3. 管理员在新增部分涉及到多表操作的信息时，应该有一个即时搜索、模糊匹配的功能。如进行挂号操作时，输入“李”，会弹出“李四”、“老李”等所有带“李”的选项。选择用户名之后，下一栏的宠物名称候选项应只对该用户名下的宠物进行匹配。

4. 同时，由于管理员在不同网页之间的操作过于相似，都是基本的增删改查，以至于大部分操作中，只有表的字段不同，而其它完全一致。故应当在开发的过程中，尽可能的抽离重复代码，封装为公用组件，以达到减少代码复用效果。

### 3.3 可行性分析

#### 3.3.1 技术可行性分析

技术可行性主要从以下几个方面进行分析：

1. 成熟的技术支持：Java作为一门成熟的、使用者最多的开发语言，其强大的生态为系统开发提供了技术支持，在开发过程中所遇到的问题都可以找到对应的解决方案。

2. 开发工具丰富：在开发过程中，有许多成熟、高效的开发工具和框架可供选择，如IntelliJ IDEA这种功能丰富的集成开发环境，以及诸如SpringBoot、SpringMVC、MyBatis-Plus等流行的Java框架。这些工具和框架大大降低了开发难度，缩短了开发周期。

3. 高度的可扩展性和易维护性：基于Java开发的宠物医院管理系统具有高度的可扩展性，可以方便地为系统添加新的功能模块。同时，系统遵循模块化设计原则，易于维护和升级。

综上所述，从技术方面来看，该系统是可行的。

#### 3.3.2 经济可行性分析

本系统的所用的开发工具中，MySQL、Git、Maven、Java以及Java的第三方库，都是免费开源的。

而所使用的Java集成开发环境 IntelliJ IDEA旗舰版虽然是收费的，但可以通过开源项目开发者的身份向JetBrains公司申请免费使用一年的许可证，从而达到免费使用的效果。

微信小程序的扫码登录功能需要一台服务器和一个HTTPS协议的域名，服务器可以通过内网穿透进行解决，但免费版的内网穿透只能提供HTTP的域名，如果映射HTTPS的域名则每个月需要支付10块钱左右。而如果将扫码登录换成手机验证码，又要向短信平台购买会员。因此在登录校验这一块，最终决定使用电子邮件来进行验证码发送，使用账号密码的方式进行登录，这样可以节省这笔支出。

微信小程序的开发者工具是免费使用的，但如果想在手机上通过小程序连接后端，也需要服务器和HTTPS域名。因此，本系统的小程序端，只在微信开发者工具中进行演示，以避免不必要的支出。

因此，本系统开发的过程中，不需要任何的金钱花费。而如果最终需要将本系统上线运行，则需要租用一台云服务器，以及购买一个专属域名，这样一年的花费约在150元左右。故该系统在经济分析上，是可行的。

### 3.4 系统业务流程分析

目前本系统的业务有三个，分别是：挂号、领养宠物、寄养宠物。

#### 3.4.1 挂号流程

系统在设想中的挂号流程是：用户来到前台向当值的护工说明宠物情况，护工在系统中创建相应的挂号单，并在系统中自动推送给对应医生，医生传唤用户并处理完宠物病情之后，再在系统中点击确认挂号单处理完成。

但目前许多宠物医院都是只有一个医生而没有护工，因此这种情况，只能医生也添加录入挂号信息的功能，让其能够在处理病情的同时录入挂号信息。

#### 3.4.2 寄养宠物流程

用户要寄养宠物，并不需要在系统中申请，事实上大部分的宠物寄养，都是在官网看到某家宠物医院提供宠物寄养服务，之后通过电话或其它联系方式协商好具体的寄养流程，然后再由用户携带宠物到现场进行寄养业务办理。

或者用户不提前与宠物医院进行联系，直接带宠物来宠物店，协商好寄养时长、寄养押金之后，办理寄养业务。

因此，寄养流程只需要提供寄养宠物的信息展示给用户看，以及在系统中创建系统订单这两个功能即可。

#### 3.4.3 领养宠物流程

领养宠物的流程与寄养有很大不同，它需要先在系统看到可以被领养的宠物信息，然后用自己的联系方式注册一个账号，才能申请领养，之后宠物医院会与用户进行联系，进行领养资格审查，接着才会让用户支付押金，对宠物进行领养。

因此，本系统的领养流程是：用户在浏览了待领养宠物信息后，向后台提交领养申请，管理员在看到领养申请之后，通过用户注册账号时所留下的联系方式联系用户，进行领养资格的审查，之后再通知用户线下领养并支付押金，待用户办理完领养手续后，管理员通过用户的领养订单，用户领走宠物，至此领养完成。

## 四、系统设计

### 4.1 系统功能模块划分

本系统主要划分为以下模块：权限校验模块、在线聊天模块、文件管理模块、用户展示模块、医生信息模块、后台管理模块。

1. 权限校验模块：主要用于不同角色的登录、注册、密码找回。以及存储当前登录的角色信息、判断当前操作是否具有角色权限等。

2. 在线聊天模块：用于用户与医生的在线聊天，包括了在线发送文字消息、在线发送图片、查看聊天历史记录。

3. 文件管理模块：包括了图片上传与回显、发布和修改公告、清除冗余文件资源。

4. 用户展示模块：用于展示用户的个人信息、历史挂号信息、用户名下的宠物信息等。

5. 医生信息模块：展示医生的个人信息、医生名下的挂号等，同时也能让医生对挂号进行处理。

6. 后台管理模块：管理员对后台的信息，如用户、宠物、挂号、医生、领养、寄养、公告等信息进行增删改。以及对部分业务流程进行审批操作。

### 4.2 数据库设计

数据库的设计是一个管理系统的核心与基础。在设计数据库时，根据管理系统的一些基本流程以及功能模块划分，制定了十张表，以下是这十张表的基本设计。

#### 4.2.1 表的公共字段

为了更好的展示、了解每一条信息，每张表都有三个公共字段，分别是：

1. 更新时间，即当前数据更新时间，若该数据一直没有被修改，则与创建时间相同。
2. 创建时间，即当前数据的创建时间，在一些表中有别的含义，比如在挂号表中代表挂号时间。
3. 逻辑删除，默认为0，表示没有删除；当进行逻辑删除时，将这个字段变为逻辑删除的时间。同时这个字段在部分表中(例如用户表、管理员表)，与账号、工号等字段，一同构成唯一索引。

* 【表4-1公告字段】

| 列名        | 数据类型    | 默认值 | 说明                            |
| ----------- | ----------- | ------ | -----------------------------|
| create_time | datetime    |        | 当前数据的创建时间              |
| update_time | datetime    |        | 当前数据的修改时间              |
| is_del      | varchar(32) | 0      | 逻辑删除，默认0，删除时填充日期 |

#### 4.2.2 数据库表设计

1. **领养表(adopt)**

用于存放领养宠物的订单信息，这里的数据会在用户申请领养宠物时生成，也可以由管理员在后台添加。数据在生成之后都是待审核状态，只能由管理员审批通过才能领养成功。

领养表ID(adopt_id)，领养表的主键，与其它表的主键一样，自动递增，同时数据类型为bigint(20)，之所以使用这个数据类型，是为了提高数据库在多线程下的性能，采用雪花算法所导致的。但在系统开发过程中，因为雪花算法所生成的ID不便查看，同时系统也没有在高并发下提升性能的需求，便取消了雪花算法，将主键ID改为了自增形式，但考虑到系统以后可能会有高并发的应用场景，主键的数据类型仍然为bigint(20)。

订单编号(adopt_code)：在数据创建时使用当前时间所生成，为了方便在后台通过订单号查找。

表中有两个外键，分别是：

1. 被领养宠物的ID(pet_id)，来自宠物表，表示被领养宠物。

2. 领养人的ID(client_id)，来自用户表，表示领养人。

* *【表 4-2 领养表】*

| 列名        | 数据类型    | 主键 | 外键 | 说明                                    |
| ----------- | ----------- | ---- | ---- | --------------------------------------- |
| adopt_id    | bigint(20)  | √    |      | 领养表的ID                              |
| adopt_code  | varchar(16) |      |      | 订单编号，根据领养宠物的时间生成        |
| pet_id      | bigint(20)  |      | √    | 领养宠物的ID，来自宠物表                |
| client_id   | bigint(20)  |      | √    | 领养人ID，来自用户表                    |
| adopt_money | int(12)     |      |      | 领养押金                                |
| adopt_info  | varchar(64) |      |      | 订单备注                                |
| in_adopt    | tinyint(4)  |      |      | 是否通过，2为待审核，1为通过，0为未通过 |

2. **挂号表(appointment)：**

用于存放挂号单的信息，这里的数据主要由管理员或医生进行添加，其中医生只能添加到自己的名下。

是否处理(is_suc)：这个字段只能由医生进行修改，有0/1两个值，0表示当前挂号没有处理，1表示当前挂号处理完毕。未处理的挂号单在展示时会排到已处理的挂号单之前。

表中有四个外键：

1. 挂号人ID(client_id)：来自用户表，表示挂号人。

2. 被挂号宠物ID(pet_id)：来自宠物表，表示被挂号的宠物。

3. 就诊科室ID(department_id)：来自科室表，表示就诊科室。

4. 医生ID(doctor_id)：来自医生表，表示看病的医生。

* *【表 4-3 挂号表】*

| 列名             | 数据类型    | 主键 | 外键 | 说明               |
| ---------------- | ----------- | ---- | ---- | ------------------ |
| appointment_id   | bigint(20)  | √    |      | 挂号单ID           |
| client_id        | bigint(20)  |      | √    | 用户ID，来自用户表 |
| pet_id           | bigint(20)  |      | √    | 宠物ID，来自宠物表 |
| appointment_date | datetime    |      |      | 就诊时间           |
| department_id    | bigint(20)  |      | √    | 科室ID，来自科室表 |
| doctor_id        | bigint(20)  |      | √    | 医生ID，来自医生表 |
| appointment_info | varchar(64) |      |      | 挂号简短信息       |
| is_suc           | tinyint(1)  |      |      | 是否处理，默认为0  |

3. **用户表(client)：**

存放用户的信息，包括了用户的账号密码。

用户密码(client_password)：有一个默认值，默认值就是123456经过MD5加盐加密之后的密文，固定有32位字符。其数据类型之所以使用varchar(32)而不是char(32)是因为：数据类型char长度是固定的，为了方便在开发过程中的调试，比如在关闭MD5加密之后使用明文密码登录，这种情况要使用varchar数据类型让长度可变。

用户的邮箱(client_tel)：用户的邮箱地址，在注册账号或者找回密码时，用于发送验证码邮件。因为一开始打算使用手机发送验证码的方式，但后来因为开发预算原因，改为了邮件发送验证码，为了防止出现不预知的问题，数据库的字段名仍然叫client_tel。

用户的生日(client_age)：使用的是date数据类型，保存是用户出生的年月日信息，这个字段在新增时默认就是数据创建的日期，后续由用户自行修改或管理员在后台修改。数据在前端展示的时候，会转化成用户的年龄。

用户照片名称(client_photo)：是用户上传照片之后，使用UUID所生成的照片名称，在前端展示的时候，会通过img标签获取用户照片。

* *【表 4-4 用户表】*

| 列名            | 数据类型    | 主键 | 外键 | 说明         |
| --------------- | ----------- | ---- | ---- | ------------ |
| client_id       | bigint(20)  | √    |      | 用户ID       |
| client_username | varchar(32) |      |      | 用户账号     |
| client_password | varchar(32) |      |      | 用户密码     |
| client_name     | varchar(32) |      |      | 用户姓名     |
| client_gender   | tinyint(1)  |      |      | 用户性别     |
| client_tel      | varchar(32) |      |      | 用户邮箱     |
| client_age      | date        |      |      | 用户生日     |
| client_info     | varchar(32) |      |      | 用户简介     |
| client_photo    | varchar(64) |      |      | 用户照片名称 |

4. **科室表(department)：**

存放科室的信息，目前科室只在医生表与挂号表中作为外键出现。

* *【表 4-5 科室表】*

| 列名               | 数据类型    | 主键 | 外键 | 说明     |
| ------------------ | ----------- | ---- | ---- | -------- |
| department_id      | bigint(20)  | √    |      | 科室ID   |
| department_name    | varchar(32) |      |      | 科室名称 |
| department_info    | varchar(32) |      |      | 科室简介 |
| department_address | varchar(32) |      |      | 科室地址 |

5. **医生表(doctor)：**

有一个外键，即科室ID(department_id)，来自科室表，表示医生所属的科室。

医生工号(doctor_code)，在数据创建时使用当前时间所生成，这同时也是医生登录系统所用的账号。

医生生日(doctor_age)，使用的是date数据类型，保存是医生出生的年月日信息。数据在前端展示的时候，会转化成医生的年龄。

医生密码(doctor_password)：默认值是由123456通过MD5加盐加密之后的密文。

医生联系方式(doctor_tel)：保存医生的邮箱，用于找回密码时接收验证码。

医生职位(doctor_job)：默认值是“医生”，也可以在创建的时侯自定义输入。

* *【表 4-6 医生表】*

| 列名            | 数据类型    | 主键 | 外键 | 说明             |
| --------------- | ----------- | ---- | ---- | ---------------- |
| doctor_id       | bigint(20)  | √    |      | 医生ID           |
| department_id   | bigint(20)  |      | √    | 科室ID           |
| doctor_code     | varchar(32) |      |      | 医生工号         |
| doctor_name     | varchar(32) |      |      | 医生姓名         |
| doctor_gender   | tinyint(1)  |      |      | 医生性别，1男0女 |
| doctor_age      | date        |      |      | 医生生日         |
| doctor_photo    | varchar(64) |      |      | 医生照片名称     |
| doctor_tel      | varchar(32) |      |      | 医生联系方式     |
| doctor_job      | varchar(16) |      |      | 医生职位         |
| doctor_info     | varchar(64) |      |      | 医生简介         |
| doctor_password | varchar(32) |      |      | 医生密码         |

6. **管理员表(employee)**

管理员表的结构大致与用户表相同，管理员密码的默认值是由123456通过MD5加盐加密之后的密文。

管理员等级(employee_level)：表示管理员的权限等级，有三个值，分别是6/4/2，分别表示超级管理员、管理员、护士，凡是不属于这三个值的，都默认是最低权限，即：只有查看部分数据的权限。

* *【表 4-7 员工表】*

| 列名              | 数据类型    | 主键 | 外键 | 说明           |
| ----------------- | ----------- | ---- | ---- | -------------- |
| employee_id       | bigint(20)  | √    |      | 管理员ID       |
| employee_username | varchar(32) |      |      | 管理员账号     |
| employee_password | varchar(32) |      |      | 管理员密码     |
| employee_name     | varchar(32) |      |      | 管理员姓名     |
| employee_level    | int(8)      |      |      | 管理员等级     |
| employee_tel      | varchar(12) |      |      | 管理员联系方式 |
| employee_photo    | varchar(64) |      |      | 管理员照片名称 |

7. **寄养表(foster)：**

表中有两个外键：

1. 被寄养的宠物ID(pet_id)：来自宠物表，表示被寄养的宠物

2. 寄养人的ID(client_id)：来自用户表，表示寄养人

订单编号(foster_code)：在数据创建时使用当前时间所生成，这是为了方便在后台通过订单号查找。

* *【表 4-8 寄养表】*

| 列名        | 数据类型    | 主键 | 外键 | 说明         |
| ----------- | ----------- | ---- | ---- | ------------ |
| foster_id   | bigint(20)  | √    |      | 寄养表的ID   |
| foster_code | varchar(16) |      |      | 订单编号     |
| pet_id      | bigint(20)  |      | √    | 寄养宠物的ID |
| client_id   | bigint(20)  |      | √    | 寄养人ID     |
| foster_term  | date        |      |      | 寄养到期时间 |
| foster_money | int(12)     |      |      | 寄养押金     |
| foster_info  | varchar(64) |      |      | 订单备注     |

8. **聊天记录表(msg)：**

存储聊天记录，因为在聊天模块中，只存在用户与医生聊天的情况，而不存在用户与用户、医生与医生，同时由于用户ID与医生ID存在一样的情况。故通过当前消息是否由用户发送，以及聊天所涉及的用户与医生来表示消息的发送方与接收方。

表中有两个外键：

1. 用户ID：来自用户表，表示这条消息所涉及的用户

2. 医生ID：来自医生表，表示这条消息所涉及的医生

是否由用户发送(is_client)：当这条消息是由用户发送的时候为1；由医生发送的时候为0。使用tinyint(1)数据类型，这样在后端使用boolean类型接收时，可以将1转化为true，将0转化为false。

是否为图片消息(is_img)：有两个值，1或0，当值为1时，表示当前消息为图片消息，同时消息内容(msg_content)为消息对应的图片名称；当值为0时，表示当前消息为文字消息。前端在渲染时，会先判断当前消息是否为图片形式，如果是，将通过img与图片名称获取消息所对应的图片，并展示在对话框中。

* *【表 4-9 聊天记录表】*

| 列名      | 数据类型   | 主键 | 外键 | 说明   |
| --------- | ---------- | ---- | ---- | ------ |
| msg_id    | bigint(20) | √    |      | 记录ID |
| client_id | bigint(20) |      | √    | 用户ID |
| doctor_id | bigint(20) |      | √    | 医生ID |
| is_client   | tinyint(1)  |      |      | 1为用户发送，0为医生 |
| msg_content | varchar(64) |      |      | 消息内容             |
| is_img      | tinyint(1)  |      |      | 是否为图片消息       |

9. **公告表(notice)：**

存储公告的相关信息，但是不存储公告的内容，公告内容以文本文件的形式保存在磁盘上。

表中有两个外键：

1. 创建人ID：来自管理员表，表示公告的创建人。

2. 修改人ID：来自管理员表，表示公告的修改人。

文本文件名称：在将公告内容与文本文件形式保存时，使用UUID所生成的文件名，在公告传到前端时，会通过文件名读取对应文本内容，并一起传到前端。

是否禁用：当前公告是否被禁用，被禁用的公告不能被用户查看。这与逻辑删除不同之处在于，被禁用的公告可以被管理员查看并修改。

* *【表 4-10 公告表】*

| 列名         | 数据类型    | 主键 | 外键 | 说明         |
| ------------ | ----------- | ---- | ---- | ------------ |
| notice_id    | bigint(20)  | √    |      | 公告ID       |
| notice_title | varchar(64) |      |      | 公告标题     |
| notice_file  | varchar(64) |      |      | 文本文件名称 |
| creat_id     | bigint(20)  |      | √    | 创建人ID     |
| update_id    | bigint(20)  |      | √    | 修改人ID     |
| is_disable   | tinyint(1)  |      |      | 是否禁用     |

10. **宠物表(pet)：**

有一个外键：宠物主人ID(client_id)，来自用户表，表示宠物的主人。该字段为空时，表示当前宠物为待领养状态，用户可以在待领养宠物的展示区查看到处于待领养状态的宠物。

* *【表 4-11 宠物表】*

| 列名        | 数据类型    | 主键 | 外键 | 说明             |
| ----------- | ----------- | ---- | ---- | ---------------- |
| pet_id      | bigint(20)  | √    |      | 宠物的ID         |
| pet_name    | varchar(16) |      |      | 宠物姓名         |
| pet_variety | varchar(16) |      |      | 宠物的品种       |
| pet_sex     | tinyint(1)  |      |      | 宠物性别，0母1公 |
| pet_age     | date        |      |      | 宠物生日         |
| pet_status  | varchar(16) |      |      | 宠物状态         |
| pet_info    | varchar(64) |      |      | 宠物动态         |
| client_id   | bigint(20)  |      | √    | 宠物主人ID       |
| pet_photo   | varchar(64) |      |      | 宠物照片名称     |

### 4.3 系统总体流程

系统的总体流程如下：

在登录页面，通过不同的登录入口进行不同角色的登录，这三个登录入口分别对应三个角色：用户、医生、管理员，不同角色登录后会进入不同的页面。

用户：用户登录之后会进入网站主页，用户可以在这里查看网站公告以及所有在寄养状态下的宠物信息，可以查看待领养的宠物并申请领养，可以查看医生的详细信息，并向医生在线咨询。用户还可以进入个人中心页面，在个人中心查看用户所拥有的宠物、用户的历史挂号信息、以及修改用户的个人资料。

医生：医生登录之后会进入到医生主页，医生可以在这里进入聊天页面回应由用户发起的在线求助，也可以处理医生当前的挂号单。医生也能进入个人中心修改医生的个人资料。

管理员：在登录之后，直接进入后台管理页面，可以在这里对医院的各种信息进行操作。根据管理员权限等级的不同，操作的权限也不一样。比如超级管理员级别，具有后台管理系统的全部权限。而管理员这一等级，具有除了人员任命、科室变动以外的全部权限。最后是护士级别，只具有对挂号、领养、寄养、宠物、用户表的新增权限，而无修改与删除权限。

### 4.4 界面设计

系统的整体界面设计通过Bootstrap5来实现响应式的布局，以及做到视觉风格上的统一。

小程序端的页面设计则力图简洁，以期在有限的页面上展示最主要的信息。

#### 4.4.1 登录页面设计

登录页面采取卡片样式，运用CSS卡片翻转的效果，将用户登录、用户注册、用户找回密码、管理员登录、医生登录这五个入口放在一个页面内，大大减少代码的重复，效果上更加地赏心悦目，同时也更加方便用户进行操作。

卡片正上方的猫头图标是宠物医院的Logo，点击这个图标可以切换到管理员登录的入口，这样做也是为了隐藏管理员登录的入口，防止用户误入。

同时这个卡片也使用了响应式布局，即：将浏览器缩小，这个卡片的宽度会随着浏览器的缩小而放大。当浏览器的宽度小于500px时，卡片的宽度会占据页面宽度的90%，这是为了防止将浏览器缩小的时候，会出现看不清页面的情况。

#### 4.4.2 用户主页的设计

主页设计宗旨是，在一个页面展示所有不需要登录就能看到的信息，力图让未注册登录的用户可以通过主页了解本系统的页面风格，以及了解当前医院的一些基本信息。

主页最上面的导航栏上的链接除了"网站公告"以外，都通往用户的个人中心，如果是没有登录的情况会重定向跳转到登录页面。这个导航栏也是响应式布局，在浏览器缩小时，右边的四个链接会隐藏起来，同时会显示一个按钮，点击这个按钮会调出下拉框以使用那四个隐藏起来的链接。

主页上方的轮播图有三个，每5秒会进行轮换，其上的文字部分会展示医院的服务宗旨、服务理念、宠物的小贴士，同时会有相应的背景图。

网站公告则选择模态框的方式进行展示公告内容，以做到不跳转网页就能看到全部内容。

主页的内容卡片同样采用响应式的设计，不过不像登录页面那样单纯增加宽度，而是随着浏览器的缩小调整布局，比如原来一行会显示四个宠物的卡片，在浏览器缩小时，会变成一行显示两个，甚至一行只显示一个宠物的卡片。

在用户已登录的情况下，将鼠标悬停在导航栏中间的头像，会弹出个人资料卡片，展示当前登录的用户信息。同时点击卡片上除了“退出登录”以外的选项也可以跳转到对应的页面，这是为了让整个界面的设计更加简洁与具有交互性。而点击“退出登录”的选项之后，会在退出登录状态之后，以游客的身份继续留在主页。

#### 4.4.3 管理员后台界面设计

管理员的后台界面是该系统在开发过程中，开发时间最长的部分。但大部分的开发时间其实并不是消耗在在编写页面上，而是在耗在了不断精简代码的过程中。经过不断的抽离重复代码，譬如将重复的页面元素通过iframe标签抽取到统一的父页面，将重复的逻辑以及依托这些逻辑的页面元素封装到JavaScript文件。现在单个页面的代码行数已从原来的500多行，降到现在的最少83行，最多200行的大小。

页面上方导航栏正中间的按钮是通往管理员个人中心的入口，这个按钮上的文字是当前管理员的用户名，点击以后会唤出一个弹窗显示管理员的个人资料，管理员可以在自己的个人资料的页面修改自己的个人资料。同时，管理员个人资料的入口旁也有科室管理、员工管理这个两个只有超级管理员才能操作的页面的入口。

导航栏在响应式布局方面与用户端主页导航栏一样，在浏览器缩小时会隐藏上面的链接，同时提供一个能唤出下拉框的按钮。

在导航栏下面的是后台管理的核心页面，首先是一个搜索框，可以根据搜索框中的内容进行模糊匹配。搜索框旁边的是切换搜索对象的按钮，比如当前搜索的是宠物名字，点击之后可以切换为搜索主人名字。这里的搜索逻辑在后端是联合搜索、模糊匹配，但是为了界面的美观，在前端只显示一个搜索框。

在搜索框右边是添加与批量删除，其下是显示当前操作信息对象的表格，可以在表格的行内对单个数据进行操作。

在最下面的是自己定义的分页条，可以跳转页面与设置页面大小。由于这个分页条每个子页面都有，但又必须保持在最后一行数据的下方，导致不能抽离到父页面，所以封装在JavaScript文件之中，在每次页面的初始化时进行写入。

#### 4.4.4 小程序端的界面设计

小程序端的各种页面相对于电脑端来说，都进行不同幅度的精简，这是为了将最主要的信息在小程序的页面上完整展示，而不得不放弃一些次要信息。

小程序端的设计思想主要是在精简页面信息的同时，尽可能的复现网页端的逻辑，小程序端所用的后端接口与网页端完全一致，相关的业务逻辑也与网页端看齐。

### 4.5 系统主要模块设计

#### 4.5.1 权限校验模块

##### 4.5.1.1 主要功能

提供了登录注册、密码找回、角色分配、权限校验、登录信息存储的功能。

1. 在登录时，根据登录入口的不同，进行不同的登录验证。同时在注册账号时，将密码通过MD5加盐加密之后存储进数据库。

2. 在密码修改与找回时，通过对比用户存储在数据库中的信息与用户填写的验证码，进行密码修改。

3. 在进行注册、密码修改时，向用户以邮件的形式发送验证码。

4. 在未登录的情况下访问需要登录才能查看的接口，会被拦截请求并跳转到登录页面。

5. 在角色登录成功后存储角色的信息，并且可以随时读取。

6. 在后台管理模块中提供权限的分级控制。

##### 4.5.1.2 设计思路

1. 首先是在登录时，要求能够区分当前登录的角色，特别是不同的角色信息可能会在不同的表中。这可以通过提供不同的登录入口来进行实现。

2. 其次，在部分操作中，可能会出现后端从缓存中读取当前角色信息的情况，这可以用Shiro自带的登录信息缓存实现。

3. 在验证码发送方面，一开始是打算使用向手机发送短信的形式，但这样需要购买短信平台的会员。由于经费限制，最终选择使用邮件发送。

4. 而密码的修改与找回方面，由于所有的密码都使用MD5加盐加密了，且该操作完全不可逆，故原密码无法找回，只能让用户重新设置一个密码来代替密码找回。

5. 在后台管理模块中，为了防止新员工因为误操作而损坏数据，必须要对权限进行分级控制，这可以提前在表中定义权限等级，在权限校验时根据权限等级赋予对应的身份即可。

#### 4.5.2 在线聊天模块

##### 4.5.2.1 主要功能

用户医生进行实时的在线聊天，同时用户或医生可以通过图片或文字的形式进行沟通。如果用户或医生有一方不在线，发送的消息会直接存储进历史消息中。而历史消息在聊天时可以随时查看。

##### 4.5.2.2 设计思路

在一开始设想的时候，是打算在前端使用HTTP请求，每5秒请求一次后端，通过不断的轮询实现在线聊天，但这种方式很消耗资源，并且不是真正的在线聊天。而后来学会使用WebSocket之后，这里便使用WebSocket来实现，用户一进入聊天页面，就发送一个WebSocket的连接请求，同时后端会将当前用户加入在线列表，一直到用户退出，这个连接才会断开，并且后端将用户从在线列表中剔除。

而用户在向医生发送消息时，为了消息的准确性，用户是先将消息存进数据库，然后再通过WebSocket向医生发送信息。而医生先是收到由WebSocket发送的消息，然后通过HTTP请求来更新当前的消息页面。这样来保证前台显示的消息与数据库中的一致。

#### 4.5.3 文件管理模块

##### 4.5.3.1 主要功能

文件管理模块的主要功能有：

1. 图片的上传与回显

2. 公告的文本文件的创建与修改

3. 冗余资源的清理

##### 4.5.3.2 设计思路

1. 图片上传回显方面，目前分为两种，一种是头像图片上传，这种方式是在前端选择完头像图片后，会立马将图片上传到指定接口，然后将图片转成128x128像素的大小，并且为了防止图片重名，将图片使用UUID进行重命名后，再存储在专门放头像图片的文件夹里，然后返回重命名之后的图片名到前端，前端再通过GET请求进行回显。而另外一种就是聊天图片的上传，这种方式与头像图片上传只有两点不同，一是不会更改图片的大小，二是在重命名后，将图片放在存储聊天图片的文件夹。

2. 公告创建与修改方面较为简单，只需要在管理员创建公告的时候，在特定文件夹中新建一个文本文件存储公告内容，后续修改只需要根据数据库中存储的文件名进行重新写入即可。

3. 而随着文件的增多与频繁的改动，必须要有一个根据数据库存储的文件名与文件夹中的文件进行比对，进而清除冗余文件的功能。这只需要读取文件夹中文件名的列表，再从列表中删去与数据库中相同的文件名，剩下的就是冗余的文件资源，对这部分文件执行删除操作即可。

#### 4.5.4 后台管理模块

##### 4.5.4.1 主要功能

1. 对宠物、用户、医生、挂号、领养寄养、公告、员工、科室的增删改查

2. 对领养、寄养业务流程的审批

3. 修改当前登录员工的个人信息

##### 4.5.4.2 设计思路

1. 业务流程审批应该有通过、未通过、待审批的三种状态，同时审批领养宠物的时候，应该注意，如果当前被申请领养的宠物已有主人，则即使管理员通过了这个申请，也会在后端通过程序逻辑拒绝，即：一个已经有主人的宠物，它的领养申请是绝对无法通过的。

2. 对于各种信息增删改查的设计思路较为简单，在一些有外键的表应该通过外键查出表所关联的信息，如挂号表可以通过外键查出挂号人与挂号宠物。同时所有的数据查询都应该使用分页查询，如果查询的页码超过了实际的最大页码，则默认返回最后一页。而增加与修改因为基本都是单表操作，则是通过MyBatis-Plus提供的API进行开发。最后就是信息的删除，因为本系统中的大部分信息之间都存在依赖关系，如用户的信息在宠物表中作为主人信息存在，在挂号表中作为挂号人存在。删除这些信息会产生不可预料的后果，因此所有的删除都采取逻辑删除的形式，即，删除数据时并不真的删除，而是给数据打上标记表明该数据被删除。同时，为了防止逻辑删除后，再新增数据时出现唯一字段重复的情况，在逻辑删除时，填充删除的时间进行区分。

3. 而为了更加区分当前登录的管理员，以及不同管理员之间采取不同的密码，后台管理模块也要有个人信息的显示与修改。

## 五、系统测试

### 5.1 测试方法简介

白盒测试[15]：主要侧重于测试对象内部的逻辑结构和内部功能。即：在了解程序的内部逻辑结构情况下，对程序的逻辑路径进行测试。其主要测试方法有逻辑覆盖法、基本路径测试法。通过保证每条语句都被执行，并分析每条代码所产生的效果，防止程序逻辑与设想的逻辑不符合的情况发生，从而提升软件的质量和可靠性。

黑盒测试[16]：主要是验证系统的输入与输出之间的正确性。即：在不了解程序具体如何实现的情况下，对其功能进行测试。其主要测试技术有：边界值分析法、等价类划分法、错误推测法等。黑盒测试的目的是发现功能逻辑错误、界面问题、数据处理误差等，从而提升系统的可用性和用户体验。

### 5.2 白盒测试

本系统在开发过程中，主要使用了白盒测试中的逻辑覆盖法。在后端接口的测试中，通过PostMan接口测试工具模拟前端参数的输入，通过使用IDEA的Debugger工具在所测试的功能模块中打断点，逐条分析每行代码所产生的效果。在前端页面的测试中，通过浏览器所提供的调试工具，与在代码使用console.log来输出每条语句的执行结果。

在系统早期使用雪花算法作为主键ID时，出现过前端数据无法修改与删除的情况。通过对每行语句的输出结果进行分析，发现是因为雪花算法所生成的Long型数据，在传到前端时被浏览器自动对后两位进行了四舍五入，导致在修改与删除时，ID匹配不上所造成的。在发现这个问题时，所采用的就是白盒测试中的逻辑覆盖法。

### 5.3 黑盒测试

本系统在开发过程中，主要使用的是黑盒测试，比如在应该输入数字的输入框中输入负数或者字符、在表单填写时输入常见的信息进行功能测试、或者在程序出现问题时，根据输入内容推断具体出现问题的地方。

在系统的每一个功能模块开发完毕时，都会使用黑盒测试的方法对功能进行检查，防止功能逻辑错误、数据处理误差。

### 5.4 部署教程

如果想在其他的电脑运行，有三点要注意，分别是：数据库、资源文件夹、邮箱。

#### 5.4.1 需要修改的参数

打开项目中`forgePet/src/main/resources`文件夹的`application.yml`文件，以下使用"配置文件"来指代该文件。

以下是配置文件中可能需要修改的参数：

```yaml
spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/pet_forge?useSSL=true
    username: root # mysql用户名
    password: root # mysql密码
  mail:
    host: smtp.qq.com
    port: 587
    username: 2231973602@qq.com # 发送者的邮箱，必须是QQ邮箱
    password: dspwtwceobsfeafa # 发送者邮箱的授权码
    default-encoding: UTF-8
```

以及资源文件夹的路径：

```yaml
pet-forge:
  images-path: C:\MixJade\MixPet\images\ # 照片存储路径
  notice-path: C:\MixJade\MixPet\notice\ # 公告存储路径
  chatImg-path: C:\MixJade\MixPet\chatImg\ # 聊天图片存储路径
```

#### 5.4.2 修改教程

**一、数据源的设置**

1. 配置文件中：`spring.datasource`下的`username`以及`password`分别为MySQL的账号和密码，必须改成自己的账号密码。

2. 然后去MySQL中新建数据库，数据库命名为`pet_forge`，数据库属性设置参见下文的第三点与第四点。

3. 字符集为`utf8 -- UTF-8 Unicode`(为了节省空间，不打算为了emoji而使用utf8mb4)。

4. 排序规则为`utf8_general_ci`(意为：不区分大小写，这样比较快)。

5. 接着在`pet_forge`数据库下，运行本项目中数据库备份文件夹下的`pet_forge.sql`文件，以导入项目数据。

**二、资源文件夹的路径(绝对路径):**

如果不想改配置文件，只需在C盘下新建名为`MixJade`的文件夹，再在`MixJade`中新建名为`MixPet`的文件夹，然后将本项目放入`MixPet`即可。

如果需要自己配置资源文件夹：

1. 将本项目中的chatImg、notice、images文件夹放在自己配置的资源文件夹中。

2. 然后修改配置文件中`pet-forge`属性之下的三个文件夹路径为自己的资源路径即可(一定要用绝对路径)。

**三、验证码的发送邮箱(mail.username)与对应授权码(mail.password)**

1. 登录QQ邮箱网页版，点击`设置`-`账户`-`开启服务： POP3/SMTP服务`。

2. 按照提示操作，开启服务并得到授权码。

3. 之后将配置文件下的`spring.mail`中的`username`和`password`改成自己的邮箱与授权码即可。

### 5.5 运行教程

注意：注册或者找回密码时的邮箱应填写真实的邮箱，因为要发送验证码

#### 5.5.1 启动Java后端

请确保当前电脑已安装了IntelliJ IDEA与Maven，且Java版本在17以上，并且已经成功部署本项目。

1. 在IntelliJ IDEA中打开本项目中的`forgePet`文件夹。

2. 点开`forgePet`文件夹下的`pom.xml`文件，确保里面的依赖都已安装，如果存在标红字体，请点击Maven刷新。

3. 部署完成之后，进入本项目下的`forgePet/src/main`文件夹，运行`ForgePetApplication.java`文件即可。

4. 当控制台打印出宠物医院管理系统启动的字样时，即是启动成功。

#### 5.5.2 启动网页前端

1. 在Java后端已启动的情况下，打开浏览器。

2. 在浏览器地址栏输入http://localhost:8083/login.html

3. 如果一起正常，此时会看到用户登录的页面。

#### 5.5.3 运行微信小程序

在启动微信小程序之前，记得先启动本项目的Java后端。

AppID自行去微信公众平台注册获取。

1. 打开微信开发者工具，选择导入项目，选择本项目之下的forgePetWX文件夹。

2. 输入自己的AppId，勾选不使用云服务。

3. 在本地Java项目的运行状态下，在微信开发者工具中编译运行小程序。

4. 注：如果一直无法登录，在微信开发者工具中，打开详情--本地设置，勾选不校验合法域名。

#### 5.5.4 用户登录

1. 在用户登录界面，输入账号`ying`，密码为`123456`，即可体验用户端功能。

2. 也可以不输入账号密码，点击左下角的游客登录，直接进入主页浏览，但许多敏感信息无权观看。

3. 用户登录之后会进入主页，将鼠标悬停在网页上方的正中间，可以看到退出登录按钮。（如果此时是游客登录或已点击退出登录按钮，该按钮会换成点击登录)。

#### 5.5.5 管理员登录

1. 在用户登录界面，点击输入框上面的猫头图标，翻转到管理员登录入口。

2. 输入账号ra9，密码123456，以体验普通员工功能，该角色仅具有部分表的新增权限。

3. 输入账号yun，密码yun，以体验普通管理员功能，该角色具有大部分（除部门表与员工表）修改与删除权限。

4. 输入账号admin，密码123456，以体验超级管理员功能，该角色具有所有权限。

5. 点击网页上方中间写有当前操作者名字的绿色按钮，或者左上角的“宠物医院”Logo，即可唤出功能菜单。

#### 5.5.6 医生登录

1. 在管理员登录界面，点击左下角的“医生登录”，翻转到医生登录入口。

2. 输入工号32312221，密码123456，即可访问到童德统医生的账号。

3. 输入工号32301063，密码123456，即可访问到汤姆医生的账号。

4. 目前所有医生的密码都是123456，欲访问不同医生的账号请自行登录。

## 六、总结与展望

### 6.1 系统的优势

根据在系统设计过程中所参考的其它的宠物医院管理系统，大致总结了三点本系统相对于其它类似系统的优势。一是本系统所用乃是当下流行的框架与技术，这样后续的维护与更新比较方便。二是本系统可以更加方便的进行部署，本系统可以提前打为jar包，这样只需要一个安装了Java与MySQL的环境就可以快速部署。三是本系统相对于其它系统，额外提供了微信小程序端的使用形式，以及用户与医生实时聊天的功能，可以更加方便用户的使用。

### 6.2 系统的缺陷

因为开发经费所限，本系统暂时无法上线，微信小程序也只能在微信开发者工具之中演示。同时，由于在刚开始开发这个系统时，对于前端方面的知识十分欠缺，完全就是在边学边写的情况下，将这个系统开发完成，以至于这个系统的一些早期开发的网页与所编写的代码有部分缺陷，给后来的维护带来许多不便。

另外，受开发时间所限，系统暂时没有预约挂号的功能，后续计划在用户端增加预约挂号模块，在管理后台增加预约挂号审批功能。

最后，由于在立项初期不太熟悉宠物医院的业务流程，导致一些地方的逻辑比较混乱，开发的一些功能也不太完善，这些都是需要改进的地方。

### 6.3 对于未来的展望

在所用技术方面，由于前端使用原生的JavaScript+HTML+CSS进行开发，所用的技术相对基础，这不但加大了开发时的工作量，而且所用不是当前的主流技术，我计划在未来使用TypeScript+Vue3+Element Plus进行重构，这样代码更加简洁，而且所用技术也相对较新。

在功能方面，受本人的药理水平与医疗知识所限，本系统暂时没有药品、套餐相关的业务模块，而这些正是现实中一些宠物医院的主要经济来源，后续可以在系统中增加药品管理、医疗套餐展示等功能，这样就可以使该系统更加贴合当前宠物医院的需求。

同时也可以在系统中加上宠物选美大赛、宠物动态分享等模块，并添加留言板等互动方面的功能，让宠物管理系统更加的社区化，这样做可以促进宠物饲养者之间的交流，也能增加人与宠物之间的感情。

##  总结

此次毕设在选题之时，我才刚学完SpringBoot，通过这次毕业设计，让我深入的了解了一个项目是如何从设计、搭建、实现再到最终完成的，同时我也借着做这个毕设项目的过程，学了前端的一些框架与技术，特别是极大的加强了我对原生JavaScript的理解，这为我以后学习其它的技术打下了深厚的基础。

在做这个毕设的过程中，我遇到过许多困难与困惑，最后都靠着网络搜索一一解决。也在做毕设的过程中产生了许多奇思妙想，都在毕设项目中一一验证。整个毕设从第一行代码开始，到初次完成，共历时三个月，如今它已不只是一个单纯的项目，也是记录着我成长的一个丰碑，它是我学习与实践的结晶，我在未来仍然会继续完善它。

同时我也在做毕设的过程中，渐渐理解了遵循代码规范[17]的重要性，明白了代码的可读性的远远比运行效率更重要的道理。甚至在做毕设的过程中，还专门抽出一部分时间去重构代码，使之更加符合规范，以及符合直觉。一段容易理解、符合直觉的代码，远远比可能存在性能提升的写法更加让人赏心悦目。

借着做这个毕设的机会，我学会了许多以前我不曾掌握的技术，我学会了如何通过邮件发送验证码，学会了如何通过WebSocket框架实现在线聊天，更重要的是，我学会了如何设计一个网页以及如何梳理一个业务的逻辑流程。这些都将在我未来的工作中提供极大的助力。

总的来说，这次毕设最重要的，就是做它的过程。借着完成毕设的过程，学会了许多能力，这些能力不只是技术方面的，还有更加成熟的思维方式，以及能够快速排除与解决问题的能力，这些能力才是真正的收获，即便以后技术更新换代，这些能力依然能够发挥其功用。

## 参考文献

[1]   童雨莎, 周丰婕. 宠物医疗发展的现状及对策研究[J].中国畜禽种业,2022,18(11):27-29.

[2]   王萨仁图雅.动物医院管理系统软件的应用技巧[J].当代畜禽养殖业,2021,(5):63-64.

[3]   徐文轩,刘博言,张雪．'互联网+'视域下美国健康医疗信息安全管理对我国的启示[J]．中国医学伦理学, 2021, 034(3): 302-308

[4]   宁玉玲. 建设可持续的信息系统——基于上海医保"十二五"规划[J].2022, (3): 50-52. 

[5]   陈晨. 现代信息技术在医院管理信息系统优化中的应用分析[J]. 中文科技期刊数据库(全文版)工程技术, 2022(4): 100-103.

[6]   何超. 计算机软件开发中JAVA编程语言及其实际应用[J]. 数码设计（上）, 2022(005):23-25.

[7]   王棋. 基于SSM框架的网上摄影系统设计与实现[J]. 电子质量, 2022, (10): 89-93.

[8]   江健锋. Springboot最小系统的设计与实现[J]. 电脑知识与技术, 2021, (4): 62-63.

[9]   MyBatis-Plus官网[EB/OL]. (2020-04-15)[2023-05-25]. https://www.baomidou.com/.

[10]   百度百科.JavaScript[EB/OL]. (2021-07-23)[2023-05-25]. https://baike.baidu.com/item /Javascript.

[11]   Bootstrap官网.Bootstrap5中文手册[EB/OL]. (2023-04-29)[2023-05-25]. h[ttps://www. bootstrap.cn/doc/book/2.html](https://www.bootstrap.cn/doc/book/2.html).

[12]   林慧. MySQL存储过程在软件测试中的应用[J]. 电脑编程技巧与维护,2021,(6):28-30.

[13]   微信开发团队.微信开放文档[EB/OL]. (2023-05-24)[2023-05-25]. https://developers. weixin.qq.com/doc/.

[14]   王晓星.基于微信小程序的应用开发浅析[J].信息技术与信息化,2021,(3):23-25.

[15]   薛阳. 软件测试中的白盒测试分析[J]. 华东科技（综合）, 2021, 000(002): 1-1.

[16]   谢斐. 基于机器学习模型的黑盒测试方法[J]. 移动信息, 2022, (001): 1-3.

[17]   阿里巴巴. Java开发手册(嵩山版)[EB/OL]. (2020-08-03)[2023-05-25]. https://developer.aliyun.com/topic/java20.

## 致谢

首先，我要感谢指导老师黄老师对我论文写作的帮助与指导，本论文从选题、资料收集，再到论文完成，都离不开黄老师的耐心指导。黄老师认真负责的态度、严谨的学术精神、渊博的知识水平都深深地激励着我。在我论文撰写的过程中，黄老师多次提供了宝贵的指导意见，使我的论文写作有了方向与目标。也正是因为黄老师的教正，才使得论文规避了许多格式方面的问题。

同时也感谢刘老师在系统编写过程中的耐心指导，在系统的实现过程中，刘老师提供了许多宝贵的建议，使系统更加趋于完善。在教学指导过程中，刘老师广泛的知识面、深厚的技术积累都让我感到敬佩。